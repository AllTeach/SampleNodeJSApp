<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
	$.getJSON('https://allorigins.me/get?url=' + encodeURIComponent('https://ohel-shem.com/portal6/pub/schedule/index.php?layer=11&class=4'), function(data){
   // alert(data.contents);
   $("#response").html(data.contents);
});
	
	
	
$(document).ready(function(){
    $("#loginbtn").click(function(){
	var username=$("#user").val();
	var password=$("#pass").val();
       $.ajax({
                    type: "POST",
                //type: "GET",
                url: 'login',
                // for GET
               // data: { continent: "'" + selectvalue + "'" },

                // for POST
                  data:JSON.stringify({username: username,password:password}),
                contentType: "application/json; charset=utf-8",
                dataType: "json",

		success: function(data){
			
			
			if(data.result != null)
				$("#div1").text(JSON.stringify(data.result.user));
			else
				$("#div1").text('No such user');
				
        }});
    });
	
	 $("#registerbtn").click(function(){
	var username=$("#userReg").val();
	var password=$("#passReg").val();
	var email= $("#emailReg").val();
	var uid = $("#idReg").val();
	var params = JSON.stringify({user: {username:username,password:password,email:email,uid:uid}});
       $.ajax({
                    type: "POST",
                //type: "GET",
                url: 'register',
                // for GET
               // data: { continent: "'" + selectvalue + "'" },

                // for POST
                  data:params,
                contentType: "application/json; charset=utf-8",
                dataType: "json",

		success: function(data){
			
			
			if(data.result != null)
				$("#div1").text("register success");
			else
				$("#div1").text('reg fail');
				
        }});
    });
	
	
});
	
	
	   function addSomething(a,b){
            return a + b;
            console.log('log from javascript');
        }
        function changeText(){
            document.getElementById('test1').innerHTML = 'Good Morning';
        }
        function loadImage() {
		/*
        	var path = "/storage/emulated/0/Download/search.png";
        	var image = document.createElement('img');
        	image.src = path;
        	document.body.appendChild(image);
        	console.log("image loaded");
		*/
        }

        function testSync() {
        	var string = "default string";
        	string = window.MyHandler.testString();
        	document.getElementById('test1').innerHTML = string;
        }
	
	

</script>
</head>
<body>
	
<input type="button" onclick="window.MyHandler.setResult(9999)"  style="height:100px; white-space: normal;text-align:left;"
       value="3. [JavaScript -> Java] Call Java function example.  (This is HTML button)" />     <br/>

<input type="button" onclick="window.MyHandler.calcSomething(198,287)"  style="height:100px; white-space: normal;text-align:left;"
       value="4. [JavaScript -> Java -> Javascript] Another complete cycle.   (This is HTML button)" />     <br/>
	
	
<input type="button" onclick="window.testSync()"  style="height:100px; white-space: normal;text-align:left;"
       value="test sync javascript call java" />     <br/>
<h1 id="test1">Hello World</h1>
	
<h3> try to login </h3>
username: <input type="text" id='user' placeholder="username"/>
password: <input type="text" id='pass' placeholder="paswword"/>
</br>
<button id="loginbtn">Try to login</button>

</br></br>

<h3> try to register </h3>
username: <input type="text" id='userReg' placeholder="username"/>
password: <input type="text" id='passReg' placeholder="paswword"/>
email: <input type="email"  id="emailReg" placeholder="email"/>
id: <input type="number" id="idReg" placeholder="simpleID"/>


</br>
<button id="registerbtn">Try to register</button>
</br></br>



<div id="div1"><h2>Result</h2></div>
<div id="response">response</div>


</body>
</html>
